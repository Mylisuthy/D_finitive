@model IEnumerable<SkyTravel.Models.TicketHistory>

<h2>Historial de Tickets</h2>
<hr>

@await Html.PartialAsync("_Alerts")

<table class="table table-striped table-bordered">
    <thead class="table-dark">
    <tr>
        <th>Fecha</th>
        <th>Reserva</th>
        <th>Pasajero</th>
        <th>Vuelo</th>
        <th>Estado</th>
        <th>Mensaje</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var item in Model)
    {
        <tr>
            <td>@item.Fecha.ToString("dd/MM/yyyy HH:mm")</td>
            <td>@item.ReservaId</td>
            <td>@item.Reserva?.pasajero?.Name</td>
            <td>@item.Reserva?.vuelo?.CodeVuelo</td>
            <td>
                @if (item.Estado == "Generado")
                {
                    <span class="badge bg-success">Generado</span>
                }
                else
                {
                    <span class="badge bg-danger">Error</span>
                }
            </td>
            <td>@item.Mensaje</td>
        </tr>
    }
    </tbody>
</table>